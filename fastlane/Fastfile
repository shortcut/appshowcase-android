default_platform(:android)

platform :android do

  #PUBLIC 
  desc "build and test application"
  lane :build_test do 
    spotless_check()
    unit_test()
  end



  desc "build, test and deploy application to Google Play"
  lane :build_test_deploy do 
    spotless_check()
    unit_test()
    deploy()
  end

  desc "Spotless check"
  private_lane :spotless_check do
    gradle(task: "spotlessCheck")
  end

  desc "Runs unit tests"
  private_lane :unit_test do
    gradle(task: "testDebugUnitTest")
  end

  desc "Deploy a new version to the Google Play"
  private_lane :deploy do
    gradle(
        task: "clean assemble",
        build_type: "release",
        print_command: true,
    )
    firebase_app_distribution(
        app: ENV["FIREBASE_APP_ID"],
        android_artifact_type: "APK",
        release_notes_file: "release_note.txt"
    )
  end

end